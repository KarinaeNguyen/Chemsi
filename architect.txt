VFEP Simulation — Object Architecture (Object Plan)
Version: 1.0
Date: 2026-01-13
Owner: Object Architecture for VFEP Simulation

Purpose
-------
This document defines an implementation-ready object model for a VFEP (Vicinity Firefighting Equipment Platform) simulation in a data center environment, including:
- Static configuration (CMDB-style) objects
- Telemetry/environment objects
- Map/layout model (machine-friendly)
- Default 4×4 rack configuration
- VFEP subsystems and relationships (sensor/rail/tank/arm/nozzle/magazine/triggers/manual control/VFE + chemicals/shell)
- Camera model (fixed room view + arm/nozzle aiming view)

Design Principles
-----------------
1) Separate Configuration vs Telemetry
   - Configuration: identity, geometry, thresholds, physical properties.
   - Telemetry: time-series readings, states, events, health, alarms.

2) Version All Spatial Assets and Layouts
   - Floor plans and rail mapping PDFs are versioned assets.
   - Runtime geometry is derived from digitized polylines + alignment metadata.

3) Add Event/Audit Early
   - Deployment events, trigger events, manual override actions, faults, maintenance, inspections.

4) Deterministic Coordinates
   - A canonical room coordinate system makes simulation reproducible and validates geometry.

-------------------------------------------------------------------------------
1. Data Center Room
-------------------------------------------------------------------------------
1.1 Basic Info (static/master data)
- room_id (unique)
- name
- location
  - site/campus, building, address (optional), GPS (optional)
- ownership
  - org/business unit, cost center, landlord vs tenant (optional)
- security_level
  - e.g., Public / Restricted / High / Critical (or numeric)
- floor
  - floor number, elevation (optional)
- areas
  - logical zones inside the room (hot aisle, cold aisle, staging, MMR, etc.)
- data_types
  - classification tags (PII, PCI, internal, confidential, regulated, etc.)

1.2 Data Center Physical/Capacity Info
- number_of_racks
- rack_configurations
  - standard footprints, aisle layout model, power/cooling assumptions
- rack_floor_density
  - kg/m² and/or racks per m²
- rack_heights_supported
  - e.g., 42U, 45U, 48U

1.3 Safety/Environmental Controls (telemetry + thresholds)
- temperature (current, min/max, target, alarm thresholds)
- humidity (current, min/max, target, alarm thresholds)
- air_flow (directional + volume if available)
- room_pressure (relative pressure; thresholds)
Optional (common): smoke/particulate, leak detection, door status.

1.4 Data Center Map / Layout Objects (versioned)
- floor_plan (asset reference)
- rack_vertical_views (per-rack elevation diagrams, U-position mapping)
- layers (overlays)
  - power, cooling, network, fire zones, camera coverage, VFEP coverage, rails, racks, aisles

Primary Relationships
- DataCenterRoom contains many Racks
- DataCenterRoom contains many Cameras
- DataCenterRoom contains many VFEP units (or VFEP zones depending on deployment)

-------------------------------------------------------------------------------
2. Rack
-------------------------------------------------------------------------------
Core Identity
- rack_id (unique)
- name/label (e.g., A12-R03)
- room_id (FK to DataCenterRoom)
- position (map coordinate linkage)
  - x,y coordinates; row/aisle; hot/cold aisle designation
- orientation (front-facing direction)
- height_u (e.g., 42)
- footprint_mm (width, depth)
- max_load_kg
- power
  - feed(s), PDU IDs, max kW, redundancy (A/B)
- network (optional)
  - ToR switch references, patch panel references

Relationships
- Rack hosts Sensors (directly and/or via VFEP association)
- Rack is covered by / associated with a VFEP (rack-level, row-level, or zone-level)
- Rack is observed by one or more Cameras

-------------------------------------------------------------------------------
3. VFEP System (and sub-objects)
-------------------------------------------------------------------------------
VFEP is modeled as an assembly/system deployed per rack/row/zone.

3.0 VFEP (system-level)
- vfep_id
- room_id (FK)
- coverage_scope
  - rack_id list OR row_id OR zone polygon
- mounting_type
  - rack-top / overhead rail / wall-mounted
- status
  - normal, armed, maintenance, fault, offline
- last_tested_at
- firmware_version (if applicable)

3.1 Sensor
- sensor_id
- vfep_id (FK)
- type
  - heat, smoke, flame, gas, thermal camera, pressure, etc.
- placement
  - rack U-position, coordinate, facing direction
- thresholds/calibration
- health
  - battery, connectivity, error codes
- telemetry_reference
  - link to time-series readings (not stored inline in config object)

3.2 Rail (includes rail mapping PDF + machine geometry)
- rail_id
- vfep_id (FK)
- name/label
- geometry_model (runtime)
  - type: polyline
  - points_xy: list of [x,y] in room coords (mm)
  - mount_height_mm
  - segments (optional)
  - supported_payload (optional): max weight, max arms supported
- rail_mapping_pdf (authoritative document reference)
  - pdf_asset_id (or document_id)
  - file_name
  - storage_uri (secure pointer)
  - version, effective_from/effective_to
  - uploaded_at, uploaded_by
  - checksum_hash (integrity)
- pdf_alignment (to make the PDF spatially actionable)
  - coordinate_system (room_plan_xy in mm)
  - scale (PDF units → mm)
  - origin_offset_xy (PDF origin to room origin)
  - rotation_deg (PDF axis to room axis)
  - page_mappings (multi-page): page → (scale, origin_offset_xy, rotation_deg)
- pdf_annotations (optional)
  - rail_path_polyline (digitized from PDF)
  - reference_markers (tie points; e.g., “Rack A1 front-left corner”)
  - related_racks (rack_ids covered by this rail)

3.3 Rail Top Gas Pressure Tank
- tank_id
- vfep_id (or rail_id)
- gas_type
- capacity
- current_pressure (telemetry)
- pressure_thresholds
- inspection_dates (last/next)
- valve_state (telemetry/state)

3.4 Arms (drone) — actuator on rail (stowed when no deployment)
- arm_id
- vfep_id (and/or rail_id)
- parking_position (when stowed)
- deployment_state
  - stowed, moving, aiming, firing, returning, fault
- motion_limits / travel_range
- position_feedback (encoder/estimate; telemetry)
- safety_interlocks
  - door open, human presence, maintenance lockout, etc.

3.5 Nozzle
- nozzle_id
- arm_id (FK)
- aiming_capability
  - pan/tilt limits, reticle calibration params
- flow_rate
- spray_pattern
- maintenance
  - clog status (telemetry), last clean

3.6 Magazine
- magazine_id
- arm_id (FK) or vfep_id (FK)
- capacity_rounds
- current_rounds (telemetry)
- reload_procedure_ref
- lot_tracking (optional)

3.7 Trigger Types / Trigger Configuration
- trigger_config_id
- vfep_id (FK)
- trigger_type
  - automatic (sensor-based), manual, scheduled test, remote operator
- rules
  - sensor fusion logic, thresholds, delays, confirmation requirements
- arming_policy
  - when VFEP can arm/disarm; access level requirements

3.8 Manual Control
- manual_control_id
- vfep_id (FK)
- control_mode
  - local panel, remote console, secure tablet
- authentication_level_required
- audit_logging_enabled
- operator_actions_log_ref (events/audit)

3.9 VFE (Vicinity Firefighting Bullet)
- vfe_id
- compatible_magazine_types
- effective_range
- discharge_profile
- safety_constraints
  - storage temp range, handling notes

3.10 Chemicals + Shell
Chemical
- chemical_id
- name
- composition or MSDS reference
- hazard_class
- storage_requirements
- expiry_date
Shell
- shell_id
- shell_material
- shell_lot
- compatibility
  - nozzle/magazine/VFE compatibility constraints

VFEP Internal Relationships
- VFEP has Sensors, Rail(s), Tank(s), Arm(s)
- Arm has Nozzle and Magazine
- Magazine contains VFE rounds
- VFE uses a Chemical + Shell specification
- VFEP is configured by TriggerConfig and can be overridden by ManualControl

-------------------------------------------------------------------------------
4. Cameras
-------------------------------------------------------------------------------
4.0 Camera (base)
- camera_id
- room_id (FK)
- type
  - fixed, PTZ, onboard/arm
- position (x,y,z) + orientation
- stream_endpoint_ref (secure reference)
- retention_policy
- status/health
- coverage_area (polygon or list of racks)

4.1 Arm View (direct nozzle view with reticle)
- camera_id (FK to Camera)
- arm_id (FK)
- reticle_calibration
  - offsets, distortion model, mapping to nozzle aim
- latency_budget (if used for control loop)

4.2 Data Center View (fixed angle cameras)
- camera_id (FK)
- fixed_angle_profile
  - focal length, FOV, rack rows covered
- rack_visibility_index (optional mapping)

-------------------------------------------------------------------------------
5. Map Model (Machine-friendly Interpretation)
-------------------------------------------------------------------------------
5.1 Canonical Coordinate System
- Units: millimeters (mm)
- Origin: room southwest corner (bottom-left of floor plan)
- Axes: +X east/right, +Y north/up
- Rack pose: centroid (x,y) + rotation_deg

5.2 Map Payload (minimum viable)
- room_id
- map.coord (units, origin, axes)
- floor_plan asset reference (versioned)
- layers
  - racks, aisles, rails, reference_points
- pdf_alignment (optional)
  - scale, rotation_deg, origin_offset_xy

5.3 Rail Mapping (machine-friendly)
- Preferred runtime source: rail geometry polyline in room coords
- Authoritative document: rail mapping PDF asset + alignment
- Optional: digitized polyline and tie points (reference markers)

-------------------------------------------------------------------------------
6. Default Rack Layout Template — 4×4 Data Racks Configuration
-------------------------------------------------------------------------------
6.1 Defaults (overrideable)
- Rack footprint: 600mm (W) × 1200mm (D)
- Rack-to-rack spacing in row: 300mm
- Aisle width: 1200mm (cold) and 1200mm (hot)
- Rack height: 42U

6.2 Placement Parameters
- rack_w = 600
- rack_d = 1200
- gap_x = 300
- dx = rack_w + gap_x = 900
- dy = rack_d + aisle_width = 2400 (default)
- first rack centroid: x0=2000, y0=2000
- rotation convention:
  - Rows A and C: rot=0 (facing north)
  - Rows B and D: rot=180 (facing south)

6.3 Default Racks Layer (16 racks)
- Row A: A1..A4 at y=2000
- Row B: B1..B4 at y=4400
- Row C: C1..C4 at y=6800
- Row D: D1..D4 at y=9200
- Columns: x in {2000, 2900, 3800, 4700}

(Represented as machine-ready JSON in implementation; values above are canonical defaults.)

-------------------------------------------------------------------------------
7. High-Value Extensions (Recommended for Simulation)
-------------------------------------------------------------------------------
7.1 Telemetry Streams (Time-series)
- Sensor readings (temp, smoke, pressure, etc.)
- Environmental readings (room temperature/humidity/pressure)
- Arm motion state + position feedback
- Tank pressure readings
- Magazine round count
- Camera status/health

7.2 Event / Audit Model (strongly recommended)
- TriggerEvent: source, thresholds, evidence snapshot, decision outcome
- DeploymentEvent: arm path, aim solution, discharge parameters, target rack/zone
- ManualActionEvent: operator identity, action, reason, approvals
- FaultEvent: codes, impacted subsystems, mitigation steps
- MaintenanceEvent: inspection, calibration, cleaning, tank replacement, reload

7.3 Safety & Interlocks
- Human presence sensor integration
- Door open / emergency stop conditions
- Maintenance lockouts (software + physical)
- Role-based permissions for manual control

End of Document
